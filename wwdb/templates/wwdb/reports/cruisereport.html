<!--template/cruisereport.html-->
<!DOCTYPE html>
{% extends "wwdb/base.html" %}

{% block content %}
<div class="container p-5">
    {% for c in cruise %}
    <h2>{{c.number}} Cruise Report</h2>
    </br>
    <p>start date: {{c.startdate}}</p>
    <p>end date: {{c.enddate}}</p>
    <p></p>
    {% endfor %}
</div>
<div class="container p-5">
    <h2>Winch Report</h2>
    </br>

    <h5>Cast count</h5>
    {% for winch, count in cast_by_winch_count.items %}
    {% if count %}
    <p>{{winch}} cast count: {{count}}</p>
    {% endif %}
    {% endfor %}
    </br>
    <h5>Max tension</h5>
    {% for winch, tension in maxtension_by_winch.items %}
    {% if tension %}
    <p>{{winch}} max tension: {{tension}}</p>
    {% endif %}
    {% endfor %}
    </br>
    <h5>Max payout</h5>
    {% for winch, payout in maxpayout_by_winch.items %}
    {% if payout %}
    <p>{{winch}} max payout: {{payout}}</p>
    {% endif %}
    {% endfor %}
    </br>
    <h5>Block arrangements</h5>
    {% for winch in active_winches %}
    {% if winch == 'winch1' %}
    {% for c in cruise %}
    <p>{{winch}}: {{c.winch1blockarrangement}}</p>
    {% endfor %}
    {% elif winch == 'winch2' %}
    {% for c in cruise %}
    <p>{{winch}}: {{c.winch2blockarrangement}}</p>
    {% endfor %}
    {% elif winch == 'winch3' %}
    {% for c in cruise %}
    <p>{{winch}}: {{c.winch3blockarrangement}}</p>
    {% endfor %}
    {% else %}
    {% endif %}
    {% endfor %}
    </br>
    </br>
    <h5>Terminations</h5>
    {% for winch in active_winches %}
    {% if winch == 'winch1' %}
    {% for c in cruise %}
    <p>{{winch}}: {{c.winch1termination}}</p>
    {% endfor %}
    {% elif winch == 'winch2' %}
    {% for c in cruise %}
    <p>{{winch}}: {{c.winch2termination}}</p>
    {% endfor %}
    {% elif winch == 'winch3' %}
    {% for c in cruise %}
    <p>{{winch}}: {{c.winch3termination}}</p>
    {% endfor %}
    {% else %}
    {% endif %}
    {% endfor %}
    {% for winch in active_winches %}
    {% if winch == 'winch2' %}
    </br>
    </br>
    <h5>Winch 2 spin direction</h5>
    {% for c in cruise %}
    <p>{{winch}}: {{c.winch2spindirection}}</p>
    {% endfor %}
    {% else %}
    {% endif %}
    {% endfor %}
    {% for c in cruise %}
    {% if c.scienceprovidedwinch %}
    </br>
    </br>
    <h5>Science provided winch notes</h5>
    <p>{{c.scienceprovidedwinch}}</p>
    {% else %}
    {% endif %}
    {% endfor %}
    </br>
</div>
<div class="container p-5">
    <h2>Casts</h2>
    </br>
    <table id="" class="display">
        <thead>
            <tr>
                <th>Start time</th>
                <th>Winch</th>
                <th>Deployment type</th>
                <th>Start operator</th>
                <th>End operator</th>
                <th>Max tension</th>
                <th>Max payout</th>
                <th>Payout at max tension</th>
                <th>meter mark at max tension</th>
                <th>time of max tension</th>
                <th>Wet end tag</th>
                <th>Dry end tag</th>
            </tr>
        </thead>
        {% for cast in cast %}
        <tr>
            <td><a href="{% url 'castedit' cast.pk %}">{{cast.format_startdate}}</a></td>
            <td>{{cast.winch}}</td>
            <td>{{cast.deploymenttype}}</td>
            <td>{{cast.startoperator}}</td>
            <td>{{cast.endoperator}}</td>
            <td>{{cast.maxtension}}</td>
            <td>{{cast.maxpayout}}</td>
            <td>{{cast.payoutmaxtension}}</td>
            <td>{{cast.metermaxtension}}</td>
            <td>{{cast.format_timemaxtension}}</td>
            <td>{{cast.wetendtag}}</td>
            <td>{{cast.dryendtag}}</td>
        </tr>
        {% endfor %}
    </table>
    </br>
    </br>
    {% for c in cruise %}
    <button type="button" class="btn btn-outline-dark">
        <a class="nav-link" href="{% url 'cruise_report_file' pk=c.id %}">download cruise report</a>
    </button>
    {% endfor %}
    {% endblock content %}
